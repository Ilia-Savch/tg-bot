# Telegram-бот и API для `postreader_tz_bot`

## Описание проекта

Проект представляет собой Telegram-бот и веб-API для управления блог-постами.

- Telegram-бот позволяет просматривать список постов и читать их содержание с датой создания.
- Веб-API (на FastAPI) предоставляет админку для создания, редактирования и удаления постов.
- Поддерживается регистрация и вход пользователей (токенная аутентификация).
- API-документация доступна через Swagger UI.

---

## Технологии

- Python 3.13+
- FastAPI
- python-telegram-bot
- PostgreSQL
- Alembic для миграций
- Docker + Docker Compose
- Конфигурация через `.env` файлы
- requirements

---

## Запуск проекта

### 1. Клонировать репозиторий
```
git clone <URL_репозитория>
cd <название_папки_проекта>
```
### 2. Запустить контейнеры через Docker Compose
```
docker-compose up --build
```
### 3. Выполнить миграции базы данных
```
docker-compose exec app alembic upgrade head
```

## Доступ к API
FastAPI доступен по адресу:
http://localhost:8000/docs — Swagger UI

## Регистрация и аутентификация
### Регистрация нового пользователя
Отправьте POST-запрос на:
```
POST /api/v1/auth/register
```
### Вход пользователя
```
POST /api/v1/auth/login
```
с теми же данными, что и при регистрации.
В ответе получите токен для доступа к защищённым эндпоинтам.

## Работа с API постов
Для создания, обновления и удаления постов используйте эндпоинты под /posts/*.
Все запросы должны содержать заголовок:
```
Authorization: Bearer <токен>
```

## Использование Telegram-бота postreader_tz_bot

- Откройте Telegram и найдите бота по имени postreader_tz_bot.
- Отправьте команду /start — бот приветствует вас.
- Отправьте команду /posts — бот покажет кнопки с заголовками доступных постов.
- Нажмите на заголовок — бот покажет текст и дату создания поста.

Синхронизация данных происходит напрямую через общую базу данных PostgreSQL, доступную для бота и веб-API.
Все сервисы запускаются в Docker-контейнерах и взаимодействуют друг с другом.
